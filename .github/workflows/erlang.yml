# Build mqt-erl-sw and mqt-erl-libs packages on various OTP versions

name: Erlang CI
on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  ci:
    name: Build and install ${{matrix.package}} on ${{matrix.otp_vsn}} and ${{matrix.os}}
    runs-on: ${{matrix.os}}

    strategy:
      matrix:
        otp_vsn: [23.1, 24.0]
        os:      [ubuntu-latest]
        package: [mqt-erl-sw, mqt-erl-libs]

    container:
      image:   archlinux
      options: --privileged
      volumes:
        - /opt:/opt
      #image: erlang:${{matrix.otp_vsn}}

    steps:
      - uses: actions/checkout@v2
      - name: Install ${{matrix.package}}
        run:  ./install.sh -i -p ${{matrix.package}}
